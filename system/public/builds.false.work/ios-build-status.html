<!DOCTYPE html>
<html>
<head>
  <title>iOS Build Status - SpiderLily | builds.false.work</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Courier New', monospace;
      background: #0a0a0a;
      color: #e0e0e0;
      line-height: 1.6;
      padding: 1.5rem;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #333;
    }
    h1 {
      font-size: 1.4rem;
      color: #0f0;
    }
    .back-link {
      color: #666;
      text-decoration: none;
      font-size: 0.9rem;
    }
    .back-link:hover {
      color: #0f0;
    }
    .status-banner {
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-radius: 4px;
      font-weight: bold;
    }
    .status-blocker {
      background: linear-gradient(90deg, #300 0%, #200 100%);
      border-left: 4px solid #f00;
      color: #f88;
    }
    .status-warning {
      background: linear-gradient(90deg, #330 0%, #220 100%);
      border-left: 4px solid #ff0;
      color: #ff8;
    }
    .status-ok {
      background: linear-gradient(90deg, #030 0%, #020 100%);
      border-left: 4px solid #0f0;
      color: #8f8;
    }
    section {
      background: #111;
      border: 1px solid #222;
      border-radius: 4px;
      margin-bottom: 1.5rem;
      overflow: hidden;
    }
    section h2 {
      font-size: 1rem;
      padding: 0.75rem 1rem;
      background: #1a1a1a;
      border-bottom: 1px solid #222;
      color: #0d0;
    }
    section h2 .emoji {
      margin-right: 0.5rem;
    }
    .content {
      padding: 1rem;
    }
    .meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.75rem;
    }
    .meta-item {
      background: #0a0a0a;
      padding: 0.5rem 0.75rem;
      border-radius: 3px;
      border-left: 2px solid #333;
    }
    .meta-label {
      color: #666;
      font-size: 0.75rem;
      text-transform: uppercase;
    }
    .meta-value {
      color: #0f0;
      font-size: 0.9rem;
    }
    pre {
      background: #050505;
      padding: 1rem;
      border-radius: 3px;
      overflow-x: auto;
      font-size: 0.8rem;
      line-height: 1.5;
    }
    code {
      color: #8f8;
    }
    .error-log {
      color: #f66;
    }
    .warning-log {
      color: #ff8;
    }
    .success-log {
      color: #8f8;
    }
    ul.checklist {
      list-style: none;
    }
    ul.checklist li {
      padding: 0.4rem 0;
      padding-left: 1.5rem;
      position: relative;
    }
    ul.checklist li::before {
      position: absolute;
      left: 0;
      width: 1.2rem;
    }
    ul.checklist li.done::before {
      content: "‚úÖ";
    }
    ul.checklist li.fail::before {
      content: "‚ùå";
    }
    ul.checklist li.pending::before {
      content: "üîÑ";
    }
    .build-history {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    .build-history th,
    .build-history td {
      padding: 0.5rem 0.75rem;
      text-align: left;
      border-bottom: 1px solid #222;
    }
    .build-history th {
      color: #666;
      font-weight: normal;
      text-transform: uppercase;
      font-size: 0.7rem;
    }
    .build-history tr:hover {
      background: #151515;
    }
    .tag {
      display: inline-block;
      padding: 0.15rem 0.5rem;
      border-radius: 3px;
      font-size: 0.7rem;
      text-transform: uppercase;
    }
    .tag-success {
      background: #052;
      color: #0f0;
    }
    .tag-fail {
      background: #520;
      color: #f66;
    }
    .tag-pending {
      background: #330;
      color: #ff8;
    }
    .tag-blocked {
      background: #402;
      color: #f8f;
    }
    .cmd {
      background: #0a0a0a;
      padding: 0.75rem 1rem;
      margin: 0.5rem 0;
      border-radius: 3px;
      font-size: 0.8rem;
      border-left: 2px solid #0f0;
    }
    .cmd-label {
      color: #666;
      font-size: 0.7rem;
      margin-bottom: 0.25rem;
    }
    footer {
      text-align: center;
      padding: 1.5rem;
      color: #444;
      font-size: 0.8rem;
    }
    footer a {
      color: #0a0;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    @media (max-width: 700px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }
    .device-card {
      background: #0a0a0a;
      padding: 0.75rem;
      border-radius: 3px;
      margin-bottom: 0.5rem;
    }
    .device-name {
      color: #0f0;
      font-weight: bold;
    }
    .device-status {
      font-size: 0.8rem;
      margin-top: 0.25rem;
    }
    .device-status.available {
      color: #8f8;
    }
    .device-status.unavailable {
      color: #f88;
    }
    h3 {
      color: #888;
      font-size: 0.9rem;
      margin: 1rem 0 0.5rem;
    }
    p {
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üì± iOS Build Status: SpiderLily</h1>
      <a href="/" class="back-link">‚Üê builds.false.work</a>
    </header>

    <div class="status-banner status-warning">
      ‚ö†Ô∏è BUILD FUNCTIONAL - Post-Process Material Shader Issues Causing Display Problems
    </div>

    <section>
      <h2><span class="emoji">üìä</span>Build Information</h2>
      <div class="content">
        <div class="meta-grid">
          <div class="meta-item">
            <div class="meta-label">Project</div>
            <div class="meta-value">SpiderLily</div>
          </div>
          <div class="meta-item">
            <div class="meta-label">Last Updated</div>
            <div class="meta-value">November 26, 2025</div>
          </div>
          <div class="meta-item">
            <div class="meta-label">Engine Version</div>
            <div class="meta-value">UE 5.6.1-44394996</div>
          </div>
          <div class="meta-item">
            <div class="meta-label">Build Config</div>
            <div class="meta-value">Development</div>
          </div>
          <div class="meta-item">
            <div class="meta-label">Bundle ID</div>
            <div class="meta-value">work.false.SpiderLily</div>
          </div>
          <div class="meta-item">
            <div class="meta-label">Team ID</div>
            <div class="meta-value">F7G74Z35B8</div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2><span class="emoji">üêõ</span>Current Issues</h2>
      <div class="content">
        <h3>1. Post-Process Material Shader Failures (CRITICAL)</h3>
        <p>Two post-process materials are failing to compile for Metal ES3.1:</p>
        <pre><code class="error-log">LogMaterial: Error: Loading a material resource None with an invalid ShaderMap!
LogMaterial: Warning: Invalid shader map ID caching shaders for 'M_FishHealth_PP'
LogMaterial: Warning: Invalid shader map ID caching shaders for 'CelShadePP_Mat'
LogMaterial: Can't compile with cooked content, will use default material instead</code></pre>
        <p>These post-process effects (player health, cel-shading) are falling back to default materials, likely causing broken/gray viewport rendering.</p>

        <h3>2. FMOD Audio Bank Paths (MEDIUM)</h3>
        <p>FMOD looks for banks in subfolders, but iOS cooker flattens structure:</p>
        <pre><code class="error-log">LogFMOD: Error: Failed to open file '../../../SpiderLily/Content/FMOD/Mobile/Master.bank'
LogFMOD: Warning: Failed to load bank (File does not exist)</code></pre>
        <p>Audio will not play, but this doesn't block visual rendering.</p>

        <h3>3. Blueprint Script Warning (LOW)</h3>
        <pre><code class="warning-log">LogScript: Warning: Attempted to access index 0 from array of length 0
  in '/Game/LIB/Characters/Player/BP_Player.BP_Player_C'</code></pre>
      </div>
    </section>

    <section>
      <h2><span class="emoji">‚úÖ</span>Component Status</h2>
      <div class="content">
        <div class="two-col">
          <div>
            <h3>Working</h3>
            <ul class="checklist">
              <li class="done">Code signing configuration</li>
              <li class="done">Apple Developer credentials</li>
              <li class="done">.uproject staging</li>
              <li class="done">FMOD iOS binaries (98MB)</li>
              <li class="done">Packaging succeeds</li>
              <li class="done">App installs on devices</li>
              <li class="done">Game engine initializes</li>
              <li class="done">Level loads (L_VerticalSlice_Demo)</li>
              <li class="done">Touch input functional</li>
              <li class="done">Device rotation works</li>
            </ul>
          </div>
          <div>
            <h3>Failing</h3>
            <ul class="checklist">
              <li class="fail">M_FishHealth_PP shader compilation</li>
              <li class="fail">CelShadePP_Mat shader compilation</li>
              <li class="fail">FMOD Mobile bank loading</li>
              <li class="pending">BP_Player component interface</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2><span class="emoji">üì±</span>Test Devices</h2>
      <div class="content">
        <div class="device-card">
          <div class="device-name">aesthetic.computer</div>
          <div class="device-status available">‚úì Connected &amp; Provisioned</div>
          <div style="font-size:0.75rem;color:#666;margin-top:0.25rem;">
            iPhone 14 Pro Max ‚Ä¢ UDID: 46720BDD-8807-53C8-AA2E-6977BCA606D3
          </div>
        </div>
        <div class="device-card">
          <div class="device-name">Matt's iPhone</div>
          <div class="device-status unavailable">‚úó Disconnected</div>
          <div style="font-size:0.75rem;color:#666;margin-top:0.25rem;">
            iPhone 16 Pro Max ‚Ä¢ UDID: 9654E2B8-54C5-53AD-9F78-60AA7BB15BFD
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2><span class="emoji">üìú</span>Build History</h2>
      <div class="content">
        <table class="build-history">
          <thead>
            <tr>
              <th>Build</th>
              <th>Date</th>
              <th>Approach</th>
              <th>Result</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>#8</td>
              <td>Oct 30, 20:28</td>
              <td>ForcePlatformName=Desktop</td>
              <td><span class="tag tag-blocked">Blocked</span> No provisioned device</td>
            </tr>
            <tr>
              <td>#7</td>
              <td>Oct 30, 20:23</td>
              <td>ForcePlatformName=Desktop</td>
              <td><span class="tag tag-pending">Untested</span> Never deployed</td>
            </tr>
            <tr>
              <td>#6</td>
              <td>Oct 30, 20:08</td>
              <td>Identity staging remaps</td>
              <td><span class="tag tag-fail">Failed</span> Still flat structure</td>
            </tr>
            <tr>
              <td>#5</td>
              <td>Oct 30, 20:02</td>
              <td>Copy Mobile folder</td>
              <td><span class="tag tag-fail">Failed</span> Cooker flattened anyway</td>
            </tr>
            <tr>
              <td>#4</td>
              <td>Oct 30, 19:45</td>
              <td>Symlink Mobile‚ÜíDesktop</td>
              <td><span class="tag tag-fail">Failed</span> Symlink not preserved</td>
            </tr>
            <tr>
              <td>#3</td>
              <td>Oct 30, 19:34</td>
              <td>Force config reload</td>
              <td><span class="tag tag-fail">Failed</span> Runtime path unchanged</td>
            </tr>
            <tr>
              <td>#2</td>
              <td>Oct 30, 19:08</td>
              <td>Staging remap (Mobile)</td>
              <td><span class="tag tag-fail">Failed</span> Cache issue</td>
            </tr>
            <tr>
              <td>#1</td>
              <td>Oct 30, 19:08</td>
              <td>Staging remap (Desktop)</td>
              <td><span class="tag tag-fail">Failed</span> FMOD path mismatch</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <h2><span class="emoji">üîß</span>Recommended Fixes</h2>
      <div class="content">
        <h3>Fix #1: Post-Process Material Shaders</h3>
        <p>Verify materials are cooked for iOS Metal ES3.1:</p>
        <ul style="margin-left:1.5rem;margin-top:0.5rem;">
          <li>Project Settings ‚Üí Packaging ‚Üí Include Shader Formats ‚Üí METAL_ES3_1_IOS</li>
          <li>Check M_FishHealth_PP and CelShadePP_Mat aren't excluded from cooking</li>
          <li>Consider disabling post-process temporarily to confirm this is the cause</li>
        </ul>

        <h3>Fix #2: FMOD Bank Path (Post-Build Script)</h3>
        <div class="cmd">
          <div class="cmd-label">Add to package-spiderlily-ios.sh after build:</div>
          <code>FMOD_PATH="$OUTPUT_DIR/$APP_NAME/cookeddata/spiderlily/content/fmod"<br>
mkdir -p "$FMOD_PATH/Desktop"<br>
cp "$FMOD_PATH/master.bank" "$FMOD_PATH/Desktop/"<br>
cp "$FMOD_PATH/master.strings.bank" "$FMOD_PATH/Desktop/"</code>
        </div>
      </div>
    </section>

    <section>
      <h2><span class="emoji">üíª</span>Useful Commands</h2>
      <div class="content">
        <div class="cmd">
          <div class="cmd-label">Check connected devices:</div>
          <code>xcrun devicectl list devices | grep -i iphone</code>
        </div>
        <div class="cmd">
          <div class="cmd-label">Deploy to device:</div>
          <code>xcrun devicectl device install app --device UDID ~/path/to/SpiderLily.app</code>
        </div>
        <div class="cmd">
          <div class="cmd-label">Launch app:</div>
          <code>xcrun devicectl device process launch --device UDID work.false.SpiderLily</code>
        </div>
        <div class="cmd">
          <div class="cmd-label">Check FMOD structure in package:</div>
          <code>ls -laR SpiderLily.app/cookeddata/spiderlily/content/fmod/</code>
        </div>
      </div>
    </section>

    <section>
      <h2><span class="emoji">üîç</span>Key Technical Discoveries</h2>
      <div class="content">
        <h3>Unreal iOS Cooker Behavior</h3>
        <p>The iOS cooking process <strong>always flattens</strong> content folder structures. This cannot be prevented through staging remaps, symlinks, or config settings.</p>
        
        <h3>FMOD Runtime Path Construction</h3>
        <pre><code>Base: BankOutputDirectory ("FMOD")
Platform: GetPlatformName() ‚Üí "Mobile" on iOS
Override: ForcePlatformName ‚Üí "Desktop"

Expected: ../../../SpiderLily/Content/FMOD/Mobile/Master.bank
Actual:   cookeddata/spiderlily/content/fmod/master.bank (NO SUBFOLDER)</code></pre>
      </div>
    </section>

    <footer>
      <a href="https://false.work">false.work</a> ‚Ä¢ Updated November 26, 2025
    </footer>
  </div>
</body>
</html>
