parameter (or (or (or (or (or (pair (pair (string %ac_url) (string %content_hash)) (pair (string %content_type) (pair (string %metadata_uri) (address %owner)))) (pair (nat %token_id) (map %metadata string bytes))) nat) (list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))))) (pair (list %requests (pair (address %owner) (nat %token_id))) (contract %callback (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance)))))) (list (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id))))));
storage (pair (pair (address %administrator) (big_map %ledger nat address)) (pair (nat %next_token_id) (pair (big_map %operators (pair (address %owner) (pair (address %operator) (nat %token_id))) unit) (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes))))));
code {UNPAIR; IF_LEFT {IF_LEFT {IF_LEFT {IF_LEFT {IF_LEFT {DUP; GET 3; DUP; PUSH string "kidlisp"; COMPARE; EQ; SWAP; DUP; PUSH string "tape"; COMPARE; EQ; DIG 2; OR; SWAP; PUSH string "painting"; COMPARE; EQ; OR; IF {} {PUSH string "INVALID_CONTENT_TYPE"; FAILWITH;}; SENDER; DUP 3; CAR; CAR; DUP 2; COMPARE; EQ; DUP 3; GET 4; CDR; DUP 3; COMPARE; EQ; OR; IF {DROP;} {DROP; PUSH string "FA2_NOT_ADMIN"; FAILWITH;}; DUP 2; GET 3; EMPTY_MAP string bytes; PUSH string "Keep"; PACK; SOME; PUSH string "name"; UPDATE; PUSH string "Permanent reference to aesthetic.computer piece"; PACK; SOME; PUSH string "description"; UPDATE; DUP 3; CAR; CAR; PACK; SOME; PUSH string "artifactUri"; UPDATE; DUP 3; CAR; CAR; PACK; SOME; PUSH string "displayUri"; UPDATE; DUP 3; CAR; CAR; PACK; SOME; PUSH string "thumbnailUri"; UPDATE; DUP 3; CAR; CDR; PACK; SOME; PUSH string "content_hash"; UPDATE; DUP 3; GET 3; PACK; SOME; PUSH string "content_type"; UPDATE; DUP 2; PAIR; SOME; DUP 2; DUP 4; DUP; GET 6; DIG 2; DIG 2; UPDATE; UPDATE 6; DUP 2; GET 4; CDR; SOME; DUP 2; DIG 2; DUP; GET 4; DIG 2; DIG 2; UPDATE; UPDATE 4; DUP; GET 3; PUSH nat 1; ADD; UPDATE 3; NIL operation; PAIR;} {SENDER; DUP 3; CAR; CAR; COMPARE; EQ; IF {} {PUSH string "FA2_NOT_ADMIN"; FAILWITH;}; DUP 2; GET 6; DUP 2; CAR; MEM; IF {} {PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH;}; DUP 2; GET 6; DUP 2; CAR; GET; IF_NONE {PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH;} {}; DUP; CDR; DIG 2; CDR; ITER {UNPAIR; SOME; DIG 2; SWAP; UPDATE;}; DIG 2; CAR; PAIR; SOME; DIG 2; CAR; DIG 2; DUP; GET 6; DIG 2; DIG 2; UPDATE; UPDATE 6; NIL operation; PAIR;}} {SENDER; DUP 3; CAR; CAR; COMPARE; EQ; IF {} {PUSH string "FA2_NOT_ADMIN"; FAILWITH;}; DUP 2; GET 6; DUP 2; MEM; IF {} {PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH;}; DUP 2; GET 6; DUP 2; GET; IF_NONE {PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH;} {}; DUP; CDR; PUSH bytes 0x01; SOME; PUSH string "__frozen"; UPDATE; DIG 2; PAIR; SOME; DIG 2; DIG 2; DUP; GET 6; DIG 2; DIG 2; UPDATE; UPDATE 6; NIL operation; PAIR;}} {UNPAIR; SWAP; SENDER; DIG 2; ITER {UNPAIR; DUP 3; DUP 2; COMPARE; EQ; IF {} {DUP 4; GET 8; DUP 4; DUP 3; PAIR; MEM; IF {} {PUSH string "FA2_NOT_OPERATOR"; FAILWITH;};}; SWAP; ITER {UNPAIR; UNPAIR; PUSH nat 1; SWAP; COMPARE; EQ; IF {} {PUSH string "FA2_INSUFFICIENT_BALANCE"; FAILWITH;}; DUP 5; GET 3; SWAP; DUP 4; PAIR; GET; IF_NONE {PUSH string "FA2_INSUFFICIENT_BALANCE"; FAILWITH;} {DROP;}; DUP 4; UNPAIR; UNPAIR; UNPAIR; DUP 4; DUP 6; PAIR; NONE unit; SWAP; UPDATE; DUP 5; DUP 7; PAIR; PUSH unit Unit; SOME; SWAP; UPDATE; PAIR; PAIR; PAIR; DIP {DROP 4}; SWAP; DIP {DUP};}; DROP;}; DROP; NIL operation; PAIR;}} {UNPAIR; SWAP; DIG 2; SWAP; MAP {DUP 2; GET 3; SWAP; DUP; DIG 2; GET; IF_SOME {DROP; PUSH nat 1;} {PUSH nat 0;}; SWAP; PAIR;}; DIG 2; PUSH mutez 0; DIG 2; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR;}} {UNPAIR; SWAP; SENDER; DIG 2; ITER {IF_LEFT {UNPAIR; DUP 3; DUP 2; COMPARE; EQ; IF {} {PUSH string "FA2_NOT_OWNER"; FAILWITH;}; DUP 4; GET 8; DIG 2; DIG 2; PAIR; PUSH unit Unit; SOME; SWAP; UPDATE; DIG 2; UNPAIR; UNPAIR; DROP; PAIR; DIG 2; CAR; PAIR; PAIR; SWAP;} {UNPAIR; DUP 3; DUP 2; COMPARE; EQ; IF {} {PUSH string "FA2_NOT_OWNER"; FAILWITH;}; DUP 4; GET 8; DIG 2; DIG 2; PAIR; NONE unit; SWAP; UPDATE; DIG 2; UNPAIR; UNPAIR; DROP; PAIR; DIG 2; CAR; PAIR; PAIR; SWAP;};}; DROP; NIL operation; PAIR;}};
